/*@pjs preload="overlay.png"*/

screenText ="WELCOME TO ROBCO INDUSTRIES (TM) TERMLINK\n\n	> SET FILE/PROTECTION=OWNER:RWED ACCOUNTS.F\n\n	> SET HALT RESTART/MAIN\n\n	> RUN DEBUG/ACCOUNTS.F";
var sourcewords = ["REACHED","REACHER","REACHES","REACTED","REACTOR","READAPT","READDED","READERS","READIED","READIER","READIES","READILY","READING","READMIT","READOPT","READORN","READOUT","REAFFIX","REAGENT","REAGINS","REALEST","REALGAR","REALIGN","REALISE","REALISM","REALIST","REALITY","REALIZE","REALLOT","REALTER","REAMERS","REAMING","REANNEX","REAPERS","REAPING","REAPPLY","REARERS","REARGUE","REARING","REARMED","REASONS","REAVAIL","REAVERS","REAVING","REAVOWS","REAWAKE","REAWOKE","REBAITS","REBATED","REBATER","REBATES","REBATOS","REBECKS","REBEGAN","REBEGIN","REBEGUN","REBILLS","REBINDS","REBIRTH","REBLEND","REBLOOM","REBOANT","REBOARD","REBOILS","REBOOKS","REBOOTS","REBORED","REBORES","REBOUND","REBOZOS","REBREED","REBUFFS","REBUILD","REBUILT","REBUKED","REBUKER","REBUKES","REBUSES","RECALLS","RECANED","RECANES","RECANTS","RECARRY","RECASTS","RECEDED","RECEDES","RECEIPT","RECEIVE","RECENCY","RECEPTS","RECHART","RECHEAT","RECHECK","RECHEWS","RECHOSE","RECIPES","RECITAL","RECITED","RECITER","RECITES","RECKING","RECKONS","RECLAIM","RECLAME","RECLASP","RECLEAN","RECLINE","RECLUSE","RECOALS","RECOCKS","RECODED","RECODES","RECOILS","RECOINS","RECOLOR","RECOMBS","RECOOKS","RECORDS","RECORKS","RECOUNT","RECOUPE","RECOUPS","RECOVER","RECRATE","RECROSS","RECROWN","RECRUIT","RECTIFY","RECTORS","RECTORY","RECTRIX","RECTUMS","RECURVE","RECUSAL","RECUSED","RECUSES","RECYCLE","REDACTS","REDATED","REDATES","REDBAIT","REDBAYS","REDBIRD","REDBONE","REDBUDS","REDBUGS","REDCAPS","REDCOAT","REDDENS","REDDERS","REDDEST","REDDING","REDDISH","REDDLED","REDDLES","REDEARS","REDEEMS","REDEYES","REDFINS","REDFISH","REDHEAD","REDIALS","REDLEGS","REDLINE","REDNECK","REDNESS","REDOCKS","REDOING","REDOUBT","REDOUND","REDOUTS","REDOWAS","REDOXES","REDPOLL","REDRAFT","REDRAWN","REDRAWS","REDREAM","REDRESS","REDRIED","REDRIES","REDRILL","REDRIVE","REDROOT","REDROVE","REDSKIN","REDTAIL","REDTOPS","REDUCED","REDUCER","REDUCES","REDWARE","REDWING","REDWOOD","REEARNS","REEDIER","REEDIFY","REEDILY","REEDING","REEDITS","REEDMAN","REEDMEN","REEFERS","REEFIER","REEFING","REEJECT","REEKERS","REEKIER","REEKING","REELECT","REELERS","REELING","REEMITS","REENACT","REENDOW","REENJOY","REENTER","REENTRY","REEQUIP","REERECT","REESTED","REEVING","REEVOKE","REEXPEL","REFACED","REFACES","REFALLS","REFECTS","REFEEDS","REFEELS","REFENCE","REFEREE","REFFING","REFIGHT","REFILED","REFILES","REFILLS","REFILMS","REFINDS","REFINED","REFINER","REFINES","REFIRED","REFIRES","REFIXED","REFIXES","REFLATE","REFLECT","REFLETS","REFLIES","REFLOAT","REFLOOD","REFLOWN","REFLOWS","REFOCUS","REFOLDS","REFORGE","REFORMS","REFOUND","REFRACT","REFRAIN","REFRAME","REFRESH","REFRIED","REFRIES","REFRONT","REFROZE","REFUELS","REFUGED","REFUGEE","REFUGES","REFUGIA","REFUNDS","REFUSAL","REFUSED","REFUSER","REFUSES","REFUTAL","REFUTED","REFUTER","REFUTES","REGAINS","REGALED","REGALER","REGALES","REGALIA","REGALLY","REGARDS","REGATTA","REGAUGE","REGEARS","REGENCY","REGENTS","REGGAES","REGILDS","REGIMEN","REGIMES","REGINAE","REGINAL","REGINAS","REGIONS","REGIVEN","REGIVES","REGLAZE","REGLETS","REGLOSS","REGLOWS","REGLUED","REGLUES","REGMATA","REGNANT","REGORGE","REGOSOL","REGRADE","REGRAFT","REGRANT","REGRATE","REGREEN","REGREET","REGRESS","REGRETS","REGRIND","REGROOM","REGROUP","REGROWN","REGROWS","REGULAR","REGULUS","REHANGS","REHEARD","REHEARS","REHEATS","REHEELS","REHINGE","REHIRED","REHIRES","REHOUSE","REIFIED","REIFIER","REIFIES","REIGNED","REIMAGE","REINCUR","REINDEX","REINING","REINKED","REINTER","REISSUE","REITBOK","REIVERS","REIVING","REJECTS","REJOICE","REJOINS","REJUDGE","REKEYED","REKNITS","RELABEL","RELACED","RELACES","RELAPSE","RELATED","RELATER","RELATES","RELATOR","RELAXED","RELAXER","RELAXES","RELAXIN","RELAYED","RELEARN","RELEASE","RELENDS","RELENTS","RELEVES","RELIANT","RELICTS","RELIEFS","RELIERS","RELIEVE","RELIEVO","RELIGHT","RELINED","RELINES","RELINKS","RELIQUE","RELISTS","RELIVED","RELIVES","RELOADS","RELOANS","RELOCKS","RELOOKS","RELUCTS","RELUMED","RELUMES","RELYING","REMAILS","REMAINS","REMAKER","REMAKES","REMANDS","REMARKS","REMARRY","REMATCH","REMATED","REMATES","REMEETS","REMELTS","REMENDS","REMERGE","REMIGES","REMINDS","REMINTS","REMISED","REMISES","REMIXED","REMIXES","REMNANT","REMODEL","REMOLDS","REMORAS","REMORID","REMORSE","REMOTER","REMOTES","REMOUNT","REMOVAL","REMOVED","REMOVER","REMOVES","REMUDAS","RENAILS","RENAMED","RENAMES","RENDERS","RENDING","RENEGED","RENEGER","RENEGES","RENESTS","RENEWAL","RENEWED","RENEWER","RENNASE","RENNETS","RENNINS","RENOWNS","RENTALS","RENTERS","RENTIER","RENTING","RENVOIS","REOCCUR","REOFFER","REOILED","REOPENS","REORDER","REPACKS","REPAINT","REPAIRS","REPANEL","REPAPER","REPARKS","REPASTS","REPATCH","REPAVED","REPAVES","REPEALS","REPEATS","REPENTS","REPERKS","REPINED","REPINER","REPINES","REPLACE","REPLANS","REPLANT","REPLATE","REPLAYS","REPLEAD","REPLETE","REPLEVY","REPLICA","REPLIED","REPLIER","REPLIES","REPLOTS","REPLUMB","REPOLLS","REPORTS","REPOSAL","REPOSED","REPOSER","REPOSES","REPOSIT","REPOURS","REPOWER","REPRESS","REPRICE","REPRINT","REPRISE","REPROBE","REPROOF","REPROVE","REPTANT","REPTILE","REPUGNS","REPULSE","REPUMPS","REPUTED","REPUTES","REQUEST","REQUIEM","REQUINS","REQUIRE","REQUITE","RERACKS","RERAISE","REREADS","REREDOS","RERISEN","RERISES","REROLLS","REROOFS","REROUTE","RESAILS","RESALES","RESAWED","RESCALE","RESCIND","RESCORE","RESCUED","RESCUER","RESCUES","RESEALS","RESEATS","RESEAUS","RESEAUX","RESECTS","RESEDAS","RESEEDS","RESEEKS","RESEIZE","RESELLS","RESENDS","RESENTS","RESERVE","RESEWED","RESHAPE","RESHAVE","RESHINE","RESHIPS","RESHOES","RESHONE","RESHOOT","RESHOWN","RESHOWS","RESIDED","RESIDER","RESIDES","RESIDUA","RESIDUE","RESIFTS","RESIGHT","RESIGNS","RESILED","RESILES","RESINED","RESISTS","RESITED","RESITES","RESIZED","RESIZES","RESLATE","RESMELT","RESOAKS","RESOJET","RESOLED","RESOLES","RESOLVE","RESORBS","RESORTS","RESOUND","RESOWED","RESPACE","RESPADE","RESPEAK","RESPECT","RESPELL","RESPELT","RESPIRE","RESPITE","RESPLIT","RESPOKE","RESPOND","RESPOTS","RESPRAY","RESTACK","RESTAFF","RESTAGE","RESTAMP","RESTART","RESTATE","RESTERS","RESTFUL","RESTING","RESTIVE","RESTOCK","RESTOKE","RESTORE","RESTUDY","RESTUFF","RESTYLE","RESULTS","RESUMED","RESUMER","RESUMES","RESURGE","RETABLE","RETACKS","RETAILS","RETAINS","RETAKEN","RETAKER","RETAKES","RETAPED","RETAPES","RETARDS","RETASTE","RETAXED","RETAXES","RETCHED","RETCHES","RETEACH","RETEAMS","RETEARS","RETELLS","RETENES","RETESTS","RETHINK","RETIARY","RETICLE","RETILED","RETILES","RETIMED","RETIMES","RETINAE","RETINAL","RETINAS","RETINES","RETINOL","RETINTS","RETINUE","RETIRED","RETIREE","RETIRER","RETIRES","RETITLE","RETOOLS","RETORTS","RETOUCH","RETRACE","RETRACK","RETRACT","RETRAIN","RETREAD","RETREAT","RETRIAL","RETRIED","RETRIES","RETRIMS","RETSINA","RETTING","RETUNED","RETUNES","RETURNS","RETWIST","RETYING","RETYPED","RETYPES","REUNIFY","REUNION","REUNITE","REUSING","REUTTER","REVALUE","REVAMPS","REVEALS","REVELED","REVELER","REVELRY","REVENGE","REVENUE","REVERBS","REVERED","REVERER","REVERES","REVERIE","REVERSE","REVERSO","REVERTS","REVESTS","REVIEWS","REVILED","REVILER","REVILES","REVISAL","REVISED","REVISER","REVISES","REVISIT","REVISOR","REVIVAL","REVIVED","REVIVER","REVIVES","REVOICE","REVOKED","REVOKER","REVOKES","REVOLTS","REVOLVE","REVOTED","REVOTES","REVUIST","REVVING","REWAKED","REWAKEN","REWAKES","REWARDS","REWARMS","REWAXED","REWAXES","REWEAVE","REWEIGH","REWELDS","REWIDEN","REWINDS","REWIRED","REWIRES","REWOKEN","REWORDS","REWORKS","REWOUND","REWOVEN","REWRAPS","REWRAPT","REWRITE","REWROTE","REYNARD","REZONED","REZONES",
"UNACTED","UNADULT","UNAGILE","UNAGING","UNAIDED","UNAIMED","UNAIRED","UNAKITE","UNALIKE","UNAPTLY","UNARMED","UNASKED","UNAWARE","UNBAKED","UNBASED","UNBATED","UNBEARS","UNBELTS","UNBENDS","UNBINDS","UNBLEST","UNBLOCK","UNBOLTS","UNBONED","UNBOSOM","UNBOUND","UNBOWED","UNBOXED","UNBOXES","UNBRACE","UNBRAID","UNBRAKE","UNBROKE","UNBUILD","UNBUILT","UNBULKY","UNBURNT","UNCAGED","UNCAGES","UNCAKED","UNCAKES","UNCANNY","UNCASED","UNCASES","UNCHAIN","UNCHARY","UNCHOKE","UNCIALS","UNCINAL","UNCINUS","UNCIVIL","UNCLAMP","UNCLASP","UNCLEAN","UNCLEAR","UNCLIPS","UNCLOAK","UNCLOGS","UNCLOSE","UNCLOUD","UNCOCKS","UNCODED","UNCOILS","UNCOMIC","UNCORKS","UNCOUTH","UNCOVER","UNCRATE","UNCRAZY","UNCROSS","UNCROWN","UNCTION","UNCUFFS","UNCURBS","UNCURED","UNCURLS","UNDATED","UNDERDO","UNDERGO","UNDINES","UNDOCKS","UNDOERS","UNDOING","UNDRAPE","UNDRAWN","UNDRAWS","UNDRESS","UNDREST","UNDRIED","UNDRUNK","UNDULAR","UNDYING","UNEAGER","UNEARTH","UNEASES","UNEATEN","UNENDED","UNEQUAL","UNFADED","UNFAITH","UNFAKED","UNFANCY","UNFAZED","UNFENCE","UNFIRED","UNFITLY","UNFIXED","UNFIXES","UNFOLDS","UNFOUND","UNFREED","UNFREES","UNFROCK","UNFROZE","UNFUNNY","UNFURLS","UNFUSED","UNFUSSY","UNGIRDS","UNGLOVE","UNGLUED","UNGLUES","UNGODLY","UNGUARD","UNGUENT","UNGULAE","UNGULAR","UNHAIRS","UNHANDS","UNHANDY","UNHANGS","UNHAPPY","UNHASTY","UNHEARD","UNHELMS","UNHINGE","UNHIRED","UNHITCH","UNHOODS","UNHOOKS","UNHOPED","UNHORSE","UNHOUSE","UNHUMAN","UNHUSKS","UNICORN","UNIDEAL","UNIFACE","UNIFIED","UNIFIER","UNIFIES","UNIFORM","UNIPODS","UNIQUER","UNIQUES","UNISONS","UNITAGE","UNITARD","UNITARY","UNITERS","UNITIES","UNITING","UNITIVE","UNITIZE","UNJADED","UNJOINT","UNKEMPT","UNKINKS","UNKNITS","UNKNOTS","UNKNOWN","UNLACED","UNLACES","UNLADED","UNLADEN","UNLADES","UNLATCH","UNLEADS","UNLEARN","UNLEASH","UNLEVEL","UNLINED","UNLINKS","UNLIVED","UNLIVES","UNLOADS","UNLOBED","UNLOCKS","UNLOOSE","UNLOVED","UNLUCKY","UNMACHO","UNMAKER","UNMAKES","UNMANLY","UNMASKS","UNMATED","UNMEANT","UNMERRY","UNMEWED","UNMINED","UNMITER","UNMITRE","UNMIXED","UNMIXES","UNMOLDS","UNMOORS","UNMORAL","UNMOVED","UNNAILS","UNNAMED","UNNERVE","UNNOISY","UNNOTED","UNOILED","UNOWNED","UNPACKS","UNPAGED","UNPAVED","UNPICKS","UNPILED","UNPILES","UNPLAIT","UNPLUGS","UNPOSED","UNQUIET","UNQUOTE","UNRAKED","UNRATED","UNRAVEL","UNRAZED","UNREADY","UNREELS","UNREEVE","UNRESTS","UNRIMED","UNRIPER","UNRISEN","UNROBED","UNROBES","UNROLLS","UNROOFS","UNROOTS","UNROPED","UNROUGH","UNROUND","UNROVEN","UNRULED","UNSATED","UNSAVED","UNSAWED","UNSCREW","UNSEALS","UNSEAMS","UNSEATS","UNSELLS","UNSEWED","UNSEXED","UNSEXES","UNSHARP","UNSHELL","UNSHIFT","UNSHIPS","UNSHORN","UNSHOWY","UNSIGHT","UNSIZED","UNSLING","UNSLUNG","UNSMART","UNSNAPS","UNSNARL","UNSOBER","UNSOLID","UNSONCY","UNSONSY","UNSOUND","UNSOWED","UNSPEAK","UNSPENT","UNSPILT","UNSPLIT","UNSPOKE","UNSTACK","UNSTATE","UNSTEEL","UNSTEPS","UNSTICK","UNSTOPS","UNSTRAP","UNSTUCK","UNSTUNG","UNSWEAR","UNSWEPT","UNSWORE","UNSWORN","UNTACKS","UNTAKEN","UNTAMED","UNTAXED","UNTEACH","UNTHINK","UNTIRED","UNTREAD","UNTRIED","UNTRIMS","UNTRUER","UNTRULY","UNTRUSS","UNTRUTH","UNTUCKS","UNTUNED","UNTUNES","UNTWINE","UNTWIST","UNTYING","UNURGED","UNUSUAL","UNVEILS","UNVEXED","UNVOCAL","UNVOICE","UNWAXED","UNWEARY","UNWEAVE","UNWHITE","UNWINDS","UNWISER","UNWOOED","UNWOUND","UNWOVEN","UNWRAPS","UNWRUNG","UNYOKED","UNYOKES","UNYOUNG","UNZONED",
"ACTING","ADDING","AGEING","AIDING","AILING","AIMING","AIRING","ANTING","ARCING","ARMING","ASHING","ASKING","AUDING","AWEING","AWNING","BAAING","BAKING","BALING","BANING","BARING","BASING","BATING","BAYING","BIDING","BIKING","BITING","BLUING","BODING","BONING","BOOING","BORING","BOWING","BOXING","BUSING","BUYING","CAGING","CAKING","CANING","CARING","CASING","CAVING","CAWING","CEDING","CERING","CITING","CLUING","CODING","COKING","COMING","CONING","COOING","COPING","CORING","COTING","COVING","COWING","COXING","COYING","CRYING","CUBING","CUEING","CURING","DARING","DATING","DAWING","DAZING","DEKING","DEWING","DICING","DIEING","DIKING","DINING","DIVING","DOLING","DOMING","DOPING","DOSING","DOTING","DOWING","DOZING","DRYING","DUDING","DUKING","DUPING","DURING","DYEING","DYKING","EARING","EASING","EATING","EBBING","ECHING","EDGING","EGGING","ENDING","ERRING","EYEING","FACING","FADING","FAKING","FAMING","FARING","FATING","FAXING","FAYING","FAZING","FEEING","FETING","FEUING","FIFING","FILING","FINING","FIRING","FIXING","FLYING","FOXING","FRYING","FUMING","FUSING","FUZING","GAEING","GAGING","GAMING","GAPING","GATING","GAZING","GEEING","GIBING","GIEING","GIVING","GLUING","GORING","GUYING","GYBING","GYRING","GYVING","HADING","HAEING","HALING","HARING","HATING","HAVING","HAWING","HAYING","HAZING","HEWING","HEXING","HIDING","HIEING","HIKING","HIRING","HIVING","HOEING","HOKING","HOLING","HOMING","HONING","HOPING","HOSING","HYPING","IDLING","IMPING","INKING","INNING","IRKING","ISLING","JADING","JAPING","JAWING","JEEING","JEWING","JIBING","JIVING","JOKING","JOWING","JOYING","JUKING","KEYING","KITING","LACING","LADING","LAKING","LAMING","LASING","LAVING","LAWING","LAYING","LAZING","LIKING","LIMING","LINING","LIVING","LOOING","LOPING","LOSING","LOVING","LOWING","LOXING","LURING","LUTING","LYSING","MACING","MAKING","MATING","MAWING","MAYING","MAZING","METING","MEWING","MIKING","MIMING","MINING","MIRING","MIXING","MOOING","MOPING","MOVING","MOWING","MULING","MURING","MUSING","MUTING","NAMING","NIDING","NIXING","NOSING","NOTING","NUKING","OARING","OFFING","OGLING","OILING","OOHING","OOZING","OPTING","ORBING","OUTING","OWNING","PACING","PAGING","PALING","PARING","PAVING","PAWING","PAYING","PEEING","PIEING","PIKING","PILING","PINING","PIPING","PLYING","POKING","POLING","PORING","POSING","POXING","PRYING","PUKING","PULING","RACING","RAGING","RAKING","RAPING","RARING","RASING","RATING","RAVING","RAXING","RAYING","RAZING","REDING","RICING","RIDING","RILING","RIMING","RIPING","RISING","RIVING","ROBING","ROPING","ROSING","ROVING","ROWING","RULING","RYKING","SANING","SATING","SAVING","SAWING","SAYING","SEEING","SERING","SEWING","SEXING","SHYING","SIDING","SIPING","SIRING","SITING","SIZING","SKIING","SKYING","SLUING","SOLING","SORING","SOWING","SPRING","SPUING","SPYING","STRING","STYING","TAKING","TAMING","TAPING","TARING","TAWING","TAXING","TEEING","TEWING","TIDING","TIEING","TILING","TIMING","TINING","TIRING","TOEING","TOKING","TOLING","TONING","TOPING","TOTING","TOWING","TOYING","TRUING","TRYING","TSKING","TUBING","TUNING","TYNING","TYPING","TYRING","UMPING","UPPING","URGING","VEXING","VICING","VIKING","VINING","VISING","VOLING","VOTING","VOWING","WADING","WAGING","WAKING","WALING","WANING","WARING","WAVING","WAXING","WIFING","WILING","WINING","WIPING","WIRING","WISING","WITING","WIVING","WOOING","WOWING","WRYING","WYLING","WYTING","YAWING","YOKING","YOWING","ZONING",
"BEEBEE","BEEFED","BEEPED","BEEPER","BEETLE","BEEVES","BEEZER","BENDEE","BESEEM","BEWEEP","BREEZE","CHEESE","CREESE","DECREE","DEEDED","DEEMED","DEEPEN","DEEPER","DEGREE","DELETE","EELIER","EERIER","EFFETE","EKUELE","ELEVEN","EMCEED","EMCEES","EMEERS","EMERGE","EMESES","EMEUTE","ENTREE","EPHEBE","EPOPEE","ESTEEM","ETERNE","ETHENE","ETWEES","EVENED","EVENER","EXCEED","EYELET","FEEBLE","FEEDER","FEELER","FEEZED","FEEZES","FLEECE","FREEZE","GEEZER","GELEES","HEEDED","HEEDER","HEELED","HEELER","HEEZED","HEEZES","JEEPED","JEERED","JEERER","JEREED","KEEKED","KEELED","KEENED","KEENER","KEEPER","KEEVES","KETENE","LEERED","LESSEE","LEVEED","LEVEES","LEXEME","MEEKER","MEETER","MELEES","MESTEE","NEEDED","NEEDER","NEEDLE","PEEKED","PEELED","PEELER","PEENED","PEEPED","PEEPER","PEERED","PEERIE","PEEVED","PEEVES","PEEWEE","PENSEE","PEWEES","RECEDE","REDEEM","REDEYE","REEDED","REEFED","REEFER","REEKED","REEKER","REELED","REELER","REEVED","REEVES","REFEED","REFEEL","REHEEL","RELEVE","REMEET","RENEGE","RESEED","RESEEK","RESEEN","RESEES","RETENE","REVERE","SECEDE","SEEDED","SEEDER","SEEKER","SEELED","SEEMED","SEEMER","SEEPED","SEETHE","SEMEME","SERENE","SETTEE","SEVERE","SHEEVE","SLEEVE","SNEEZE","STEEVE","TEEMED","TEEMER","TEENER","TEEPEE","TEETER","TEETHE","TEPEES","TERETE","TESTEE","TWEEZE","VEEPEE","VEERED","VEGETE","VENDEE","VENEER","VESTEE","WEEDED","WEEDER","WEENED","WEENIE","WEEPER","WEEPIE","WEETED","WEEVER","WEEWEE","WHEEZE"];
var lines = {spacing:2,width:1};

var blur = {line:0, height:200,adv:5};

var game = {
guess:[],
limit:4,
answer:"",
current:"",
solved:false,
text:"",
rows:17,
words:[],
wordmeta:[],
hexbase:floor(random()*9999),
chars:12

};
var garbage =[" ", "-", "#", "[","]","'",",","/","▓","+","!","╚"," ","░"];


PImage overlay= loadImage("overlay.png");
PFont font =  loadFont("Monospace");

void setup(){
 size(640,480);
 background(2,42,18);
 
 	for(var i =0; i< game.rows *4;i++){
 		game.words.push(sourcewords[floor(random()*sourcewords.length)]);
 	}

	textFont(font,16 );
	var textsize = game.rows*game.chars*2;
	var wordsize=6;
	

	var words = 0;
	for(var i = 0 ;i< textsize;i++){
		game.text+= garbage[floor(random()*garbage.length)];
		
		if(random()< .05 && game.words[words] && game.text.length + game.words[words].length < textsize){
			game.wordmeta.push({start:i,end:i+game.words[words].length});		
			game.text+= game.words[words].toUpperCase();
			i+=game.words[words].length;
			words++;

		}
	}
	//remove all extra items
	game.words= game.words.splice(0,words);
	
	//pick a solution
	game.answer = game.words[floor(random()*game.words.length)].toUpperCase();
	//console.log(game.answer);
	frameRate(16);
}



void draw(){
	background(2,42,18);
	
	//Text;
	fill(72,234,161);
	if(screenText.length >frameCount){
		text(screenText.substring(0,frameCount)+"•", 15,30, 610, 420);
	}
	else	
	{
		text("WELCOME TO ROBCO INDUSTRIES (TM) TERMLINK", 15,30, 610, 420);
		if(game.limit > game.guess.length){
			if(game.solved){
			text("A WINNER IS YOU.\n\nSeriously though, there ought to be some sort of reward for this.", 15,90, 610, 420);	
			}
			else{
			drawGame();	
			}
		}
		else{
			text("TERMINAL LOCKED. PLEASE CONTACT ADMINISTRATOR.", 15,90, 610, 420);		
		}
	}
	
	//lines
	strokeWeight(lines.width);
	for(var i = frameCount % lines.spacing ;i< 480;i += lines.spacing){		
			stroke(64,144,112,64 );
	
	 	line(0,i,width,i);
	}
	
	
	//scan blur
	blur.line = (blur.line + blur.adv) %960;
	for(var i =  blur.line-blur.height; i < blur.line ;i++){
		stroke(64,96,64,32 - (32 * (blur.line-i)/blur.height));
		line(0,i,width,i);
	 }
	 
	
	
	//glare
	image(overlay,0,0,width,height);
	
}

void drawGame(){

		
			if(game.limit - game.guess.length <=1 && frameCount%5 >0){
			text("!!! WARNING: LOCKOUT IMMINENT !!!", 15,50, 610, 420);
			}
		
			text(game.limit-game.guess.length + " TRIES REMAIN", 15,90, 610, 420);
		
		
			var offset =120;
			for(var i =0; i< game.rows;i++){
	
				text("0x"+(game.hexbase + (i*game.chars)).toString(16).toUpperCase(),15 ,offset + i *20, 80,20);
				text(game.text.substring( (i*game.chars), (i*game.chars)+game.chars),95, offset + i *20, 155,20);
	
				text("0x"+floor(game.hexbase + (i*game.chars)+ game.text.length/2).toString(16).toUpperCase() ,250, offset + i *20,80,20);
				text(game.text.substring( (i*game.chars)+game.text.length/2,  (i*game.chars)+game.text.length/2 + game.chars) ,330, offset + i *20, 155,20);
	
	
			}
			text("> ", 460,400, 150,20);
		
		
			 //highlight hovered word.
		 //place in box at right
			if(((mouseX >= 95 && mouseX <= 215) || (mouseX >= 330&& mouseX <= 445))&& mouseY > offset){
	
				var yline = floor((mouseY- offset)/20);
				var xline = floor((mouseX- 95)/10);
				if(mouseX >=330){
				yline += game.rows;
				xline = floor((mouseX- 330)/10);
				}
	
				var index = floor(yline *game.chars +xline);
				var data = "";
	
				var isWord =false;
	
				for(var i = 0; i < game.wordmeta.length;i++){
					if(index >= game.wordmeta[i].start &&index <= game.wordmeta[i].end){
						isWord =true;
						data= game.words[i].toUpperCase();
			
						game.current = data;
					}
				}
	
				//TODO draw the inverted options here
		
		
				if(isWord){
						text(game.current, 480,400, 150,20);
					}	
			}
	
	
			//Draw previous guesses.
			for(var i = game.guess.length -1 ; i >=0; i--){
				text("> "+game.guess[i], 460,(360 - game.guess.length*40)+(i*40), 150,20);
				var correct = 0;
				for(var j = 0; j< game.guess[i].length;j++){
					if(game.guess[i][j] == game.answer[j]){
					 correct++;
					}
				}
				
				text("> "+correct+"/"+ game.answer.length+ " correct." , 460,(380 - game.guess.length*40)+(i*40), 150,20);
			}
}

void mouseClicked(){
	if(frameCount> screenText.length && game.current.length >0 && !game.solved){
	 game.guess.push(game.current);
	 if(game.current == game.answer){
		 game.solved=true;
	 }
 }
 else{
 	screenText = screenText.substring(0, frameCount);
 }

}
